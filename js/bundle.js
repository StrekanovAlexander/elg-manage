(()=>{var e={411:(e,t,a)=>{"use strict";a.r(t),a.d(t,{hide:()=>s});const s=()=>{const e=document.querySelector(".alert");e&&e.classList.add("hiding")}},363:(e,t,a)=>{"use strict";a.r(t),a.d(t,{init:()=>s});const s=()=>{const e=a(203),t=a(223),s=t.qSel("#bases"),r=t.qSel("#retail-rates");if((s||r)&&[...t.qSelAll(".input-step")].forEach((t=>{t.addEventListener("blur",(function(t){const a=t.target;e.correctInputStep(a),e.setInputStepClass(a)}))})),s){const a=t.qSel("#chk-set-by-base");a.addEventListener("click",(function(e){e.target.checked&&n()}));const s=(e,a,s)=>{const r=t.qSel(`#${e}_id_${a}`);r.value=t.fixed(s,r.dataset.precisionSize)},r=t.qSelAll("[data-rate-buy-id]"),l=t.qSelAll("[data-rate-sale-id]"),u=t.qSelAll("[data-rate-cross-id]"),o=t.qSelAll("[data-rate-cross-buy-id]"),d=t.qSelAll("[data-rate-cross-sale-id]");[...r].forEach((e=>{const t=e.id.replace("rate_buy_id_","");s("base_rate_buy",t,e.value)})),[...l].forEach((e=>{const t=e.id.replace("rate_sale_id_","");s("base_rate_sale",t,e.value)})),[...u].forEach((e=>{const a=e.id.replace("rate_cross_id_","");e.addEventListener("change",(function(e){const r=e.target,l=t.qSel(`#rate_cross_buy_id_${a}`),u=t.qSel(`#steps_cross_buy_id_${a}`),o=t.qSel(`#rate_cross_sale_id_${a}`),d=t.querySel(`#steps_cross_sale_id_${a}`),c=e.target.closest("td").closest("tr"),n=c.dataset.stepSize;c.dataset.precisionSize,l.value=Number(r.value)+u.value*n,o.value=Number(r.value)+d.value*n,s("base_rate_cross_buy",a,l.value),s("base_rate_cross_sale",a,o.value);const _=i(),b=c.dataset.operCross,v="*"==b?c.dataset.baseCurrId:c.dataset.relCurrId;let S,p;"*"==b?(S=l.value*Number(_.rate_buy),p=o.value*Number(_.rate_sale)):"/"==b&&(S=0==l.value?0:Number(_.rate_buy)/l.value,p=0==o.value?0:Number(_.rate_sale)/o.value),s("base_rate_buy",v,S),s("base_rate_sale",v,p)}))})),[...o].forEach((e=>{const t=e.id.replace("rate_cross_buy_id_","");s("base_rate_cross_buy",t,e.value)})),[...d].forEach((e=>{const t=e.id.replace("rate_cross_sale_id_","");s("base_rate_cross_sale",t,e.value)})),[...t.qSelAll(".btn-cnt")].forEach((r=>{r.addEventListener("click",(function(r){r.preventDefault();const l=r.target,u=e.getInputBySibling(l,"previousElementSibling"),o=e.getInputBySibling(l,"nextElementSibling"),d=l.closest("td").closest("tr"),_=d.dataset.stepSize,b=d.dataset.precisionSize;let v=d.dataset.currId;if(o.value=Number(o.value)+c(l),e.setInputStepClass(o),u.dataset.rateBuyId&&(u.value=(Number(u.value)+c(l)*Number(_)).toFixed(b),s("base_rate_buy",v,u.value),1==d.dataset.isBaseCross&&a.checked&&n()),u.dataset.rateSaleId&&(u.value=(Number(u.value)+c(l)*Number(_)).toFixed(b),s("base_rate_sale",v,u.value),1==d.dataset.isBaseCross&&a.checked&&n()),u.dataset.rateCrossBuyId||u.dataset.rateCrossSaleId){const e=t.qSel(`#rate_cross_id_${v}`);u.value=(Number(e.value)+Number(o.value)*Number(_)).toFixed(b),u.dataset.rateCrossBuyId&&s("base_rate_cross_buy",v,u.value),u.dataset.rateCrossSaleId&&s("base_rate_cross_sale",v,u.value);let a=d.dataset.operCross;const r=i(),l="*"==a?d.dataset.baseCurrId:d.dataset.relCurrId;if(u.dataset.rateCrossBuyId){let e;"*"==a?e=(u.value*Number(r.rate_buy)).toFixed(5):"/"==a&&(e=0==u.value?0:(Number(r.rate_buy)/u.value).toFixed(5)),s("base_rate_buy",l,e)}if(u.dataset.rateCrossSaleId){let e;"*"==a?e=(u.value*Number(r.rate_buy)).toFixed(5):"/"==a&&(e=0==u.value?0:(Number(r.rate_sale)/u.value).toFixed(5)),s("base_rate_sale",l,e)}}}))}));const c=e=>e.classList.contains("btn-cnt-up")?1:-1;[...t.qSelAll(".input-rate")].forEach((t=>{t.addEventListener("blur",(function(t){const a=t.target;e.correctInputRate(a)}))}));const n=()=>{const e=[...t.qSelAll("[data-is-base-cross]")].filter((e=>1==e.dataset.isBaseCross))[0].dataset.currId,a=t.qSel(`#rate_buy_id_${e}`).value,r=t.qSel(`#rate_sale_id_${e}`).value;[...t.qSelAll("[data-oper-cross]")].forEach((e=>{const l=e.dataset.operCross,u=e.dataset.precisionSize,o=e.dataset.currId,d="*"==l?e.dataset.baseCurrId:e.dataset.relCurrId,c=t.qSel(`#rate_cross_buy_id_${o}`),n=t.qSel(`#rate_cross_sale_id_${o}`);let i,_;"*"==l?(i=(c.value*Number(a)).toFixed(u),_=(n.value*Number(r)).toFixed(u)):"/"==l&&(i=0==c.value?0:(Number(a)/c.value).toFixed(u),_=0==n.value?0:(Number(r)/n.value).toFixed(u)),s("base_rate_buy",d,i),s("base_rate_sale",d,_)}))},i=()=>{const e=[...t.qSelAll("[data-is-base-cross]")].filter((e=>1==e.dataset.isBaseCross))[0].dataset.currId;return{rate_buy:t.qSel(`#rate_buy_id_${e}`).value,rate_sale:t.qSel(`#rate_sale_id_${e}`).value}}}}},203:(e,t,a)=>{"use strict";a.r(t),a.d(t,{setInputStepClass:()=>r,correctInputStep:()=>l,correctInputRate:()=>u,getInputBySibling:()=>o});const s=a(223),r=e=>{const t="input-step-minus",a="input-step-plus",r=s.removeClass;e.value>0?(r(e,t),e.classList.add(a)):e.value<0?(r(e,a),e.classList.add(t)):(r(e,t),r(e,a))},l=e=>{const t=parseInt(e.value);e.value=isNaN(t)?0:t},u=e=>{const t=e.value.replace(",","."),a=parseFloat(t);e.value=isNaN(a)?0:e.value=a},o=(e,t)=>{const a=e[t];return"INPUT"==a.tagName?a:a[t]}},223:(e,t,a)=>{"use strict";a.r(t),a.d(t,{removeClass:()=>s,qSel:()=>r,qSelAll:()=>l,fixed:()=>u});const s=(e,t)=>{e.classList.contains(t)&&e.classList.remove(t)},r=e=>document.querySelector(e),l=e=>document.querySelectorAll(e),u=(e,t)=>Number(e).toFixed(t)},29:(e,t,a)=>{"use strict";a.r(t),a.d(t,{run:()=>s});const s=()=>{const e=document.querySelector("#password"),t=document.querySelector("#curr_short_name"),a=document.querySelector("#curr_base_curr_id"),s=document.querySelector("#dep_full_name"),u=document.querySelector("#place_full_name");if(e){const t=document.querySelector("#btn-save"),a=document.querySelector("#password2"),s=e=>/^\w{3,}$/.test(e.value),l=(e,t)=>!(s(e)&&r(e.value,t.value));e.addEventListener("blur",(function(){t.disabled=l(e,a)})),a.addEventListener("blur",(function(s){t.disabled=l(e,a)}))}if(t){const e=document.querySelector("#btn-save"),a=e=>/^[a-zA-Z]{3}$/.test(e.value);t.addEventListener("blur",(function(){e.disabled=!a(t)}))}if(a){const e=document.querySelector("#btn-save"),t=document.querySelector("#rel_curr_id");[a,t].forEach((s=>{s.addEventListener("change",(function(){e.disabled=r(a.value,t.value)}))}))}if(s){const e=document.querySelector("#btn-save");s.addEventListener("blur",(function(){e.disabled=!l(s)}))}if(u){const e=document.querySelector("#btn-save");u.addEventListener("blur",(function(){e.disabled=!l(u)}))}},r=(e,t)=>e===t,l=e=>/^[\s0-9a-zA-Zа-яёА-ЯЁ]{3,}$/.test(e.value)}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var l=t[s]={exports:{}};return e[s](l,l.exports,a),l.exports}a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=a(411),t=a(363),s=a(29);e.hide(),t.init(),s.run()})()})();