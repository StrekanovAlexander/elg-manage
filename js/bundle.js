(()=>{var e={411:(e,t,a)=>{"use strict";a.r(t),a.d(t,{hide:()=>r});const r=()=>{const e=document.querySelector(".alert");e&&e.classList.add("hiding")}},363:(e,t,a)=>{"use strict";a.r(t),a.d(t,{init:()=>r});const r=()=>{if(document.querySelector("#bases")){const e=document.querySelector("#chk-set-by-base");e.addEventListener("click",(function(e){e.target.checked&&b()}));const t=(e,t,a)=>{const r=document.querySelector(`#${e}_id_${t}`);r.value=Number(a).toFixed(r.dataset.precisionSize)},a=document.querySelectorAll("[data-rate-buy-id]"),r=document.querySelectorAll("[data-rate-sale-id]"),s=document.querySelectorAll("[data-rate-cross-id]"),u=document.querySelectorAll("[data-rate-cross-buy-id]"),o=document.querySelectorAll("[data-rate-cross-sale-id]");[...a].forEach((e=>{const a=e.id.replace("rate_buy_id_","");t("base_rate_buy",a,e.value)})),[...r].forEach((e=>{const a=e.id.replace("rate_sale_id_","");t("base_rate_sale",a,e.value)})),[...s].forEach((e=>{const a=e.id.replace("rate_cross_id_","");e.addEventListener("change",(function(e){const r=e.target,s=document.querySelector(`#rate_cross_buy_id_${a}`),u=document.querySelector(`#steps_cross_buy_id_${a}`),o=document.querySelector(`#rate_cross_sale_id_${a}`),l=document.querySelector(`#steps_cross_sale_id_${a}`),c=e.target.closest("td").closest("tr"),d=c.dataset.stepSize;c.dataset.precisionSize,s.value=Number(r.value)+u.value*d,o.value=Number(r.value)+l.value*d,t("base_rate_cross_buy",a,s.value),t("base_rate_cross_sale",a,o.value);const n=v(),i=c.dataset.operCross,_="*"==i?c.dataset.baseCurrId:c.dataset.relCurrId;let b,m;"*"==i?(b=s.value*Number(n.rate_buy),m=o.value*Number(n.rate_sale)):"/"==i&&(b=0==s.value?0:Number(n.rate_buy)/s.value,m=0==o.value?0:Number(n.rate_sale)/o.value),t("base_rate_buy",_,b),t("base_rate_sale",_,m)}))})),[...u].forEach((e=>{const a=e.id.replace("rate_cross_buy_id_","");t("base_rate_cross_buy",a,e.value)})),[...o].forEach((e=>{const a=e.id.replace("rate_cross_sale_id_","");t("base_rate_cross_sale",a,e.value)})),[...document.querySelectorAll(".btn-cnt")].forEach((a=>{a.addEventListener("click",(function(a){a.preventDefault();const r=a.target,s=c(r,"previousElementSibling"),u=c(r,"nextElementSibling"),o=r.closest("td").closest("tr"),n=o.dataset.stepSize,i=o.dataset.precisionSize;let _=o.dataset.currId;if(u.value=Number(u.value)+l(r),d(u),s.dataset.rateBuyId&&(s.value=(Number(s.value)+l(r)*Number(n)).toFixed(i),t("base_rate_buy",_,s.value),1==o.dataset.isBaseCross&&e.checked&&b()),s.dataset.rateSaleId&&(s.value=(Number(s.value)+l(r)*Number(n)).toFixed(i),t("base_rate_sale",_,s.value),1==o.dataset.isBaseCross&&e.checked&&b()),s.dataset.rateCrossBuyId||s.dataset.rateCrossSaleId){const e=document.querySelector(`#rate_cross_id_${_}`);s.value=(Number(e.value)+Number(u.value)*Number(n)).toFixed(i),s.dataset.rateCrossBuyId&&t("base_rate_cross_buy",_,s.value),s.dataset.rateCrossSaleId&&t("base_rate_cross_sale",_,s.value);let a=o.dataset.operCross;const r=v(),l="*"==a?o.dataset.baseCurrId:o.dataset.relCurrId;if(s.dataset.rateCrossBuyId){let e;"*"==a?e=(s.value*Number(r.rate_buy)).toFixed(5):"/"==a&&(e=0==s.value?0:(Number(r.rate_buy)/s.value).toFixed(5)),t("base_rate_buy",l,e)}if(s.dataset.rateCrossSaleId){let e;"*"==a?e=(s.value*Number(r.rate_buy)).toFixed(5):"/"==a&&(e=0==s.value?0:(Number(r.rate_sale)/s.value).toFixed(5)),t("base_rate_sale",l,e)}}}))}));const l=e=>e.classList.contains("btn-cnt-up")?1:-1,c=(e,t)=>{const a=e[t];return"INPUT"==a.tagName?a:a[t]},d=e=>{e.value>0?(n(e,"input-step-minus"),e.classList.add("input-step-plus")):e.value<0?(n(e,"input-step-plus"),e.classList.add("input-step-minus")):(n(e,"input-step-minus"),n(e,"input-step-plus"))},n=(e,t)=>{e.classList.contains(t)&&e.classList.remove(t)};[...document.querySelectorAll(".input-step")].forEach((e=>{e.addEventListener("blur",(function(e){const t=e.target;i(t),d(t)}))})),[...document.querySelectorAll(".input-rate")].forEach((e=>{e.addEventListener("blur",(function(e){const t=e.target;_(t)}))}));const i=e=>{const t=e.value,a=parseInt(t);e.value=isNaN(a)?0:a},_=e=>{const t=e.value.replace(",","."),a=parseFloat(t);e.value=isNaN(a)?0:e.value=a},b=()=>{const e=[...document.querySelectorAll("[data-is-base-cross]")].filter((e=>1==e.dataset.isBaseCross))[0].dataset.currId,a=document.querySelector(`#rate_buy_id_${e}`).value,r=document.querySelector(`#rate_sale_id_${e}`).value;[...document.querySelectorAll("[data-oper-cross]")].forEach((e=>{const s=e.dataset.operCross,u=e.dataset.precisionSize,o=e.dataset.currId,l="*"==s?e.dataset.baseCurrId:e.dataset.relCurrId,c=document.querySelector(`#rate_cross_buy_id_${o}`),d=document.querySelector(`#rate_cross_sale_id_${o}`);let n,i;"*"==s?(n=(c.value*Number(a)).toFixed(u),i=(d.value*Number(r)).toFixed(u)):"/"==s&&(n=0==c.value?0:(Number(a)/c.value).toFixed(u),i=0==d.value?0:(Number(r)/d.value).toFixed(u)),t("base_rate_buy",l,n),t("base_rate_sale",l,i)}))},v=()=>{const e=[...document.querySelectorAll("[data-is-base-cross]")].filter((e=>1==e.dataset.isBaseCross))[0].dataset.currId;return{rate_buy:document.querySelector(`#rate_buy_id_${e}`).value,rate_sale:document.querySelector(`#rate_sale_id_${e}`).value}}}}},29:(e,t,a)=>{"use strict";a.r(t),a.d(t,{run:()=>r});const r=()=>{const e=document.querySelector("#password"),t=document.querySelector("#curr_short_name"),a=document.querySelector("#curr_base_curr_id"),r=document.querySelector("#dep_full_name"),o=document.querySelector("#place_full_name");if(e){const t=document.querySelector("#btn-save"),a=document.querySelector("#password2"),r=e=>/^\w{3,}$/.test(e.value),u=(e,t)=>!(r(e)&&s(e.value,t.value));e.addEventListener("blur",(function(){t.disabled=u(e,a)})),a.addEventListener("blur",(function(r){t.disabled=u(e,a)}))}if(t){const e=document.querySelector("#btn-save"),a=e=>/^[a-zA-Z]{3}$/.test(e.value);t.addEventListener("blur",(function(){e.disabled=!a(t)}))}if(a){const e=document.querySelector("#btn-save"),t=document.querySelector("#rel_curr_id");[a,t].forEach((r=>{r.addEventListener("change",(function(){e.disabled=s(a.value,t.value)}))}))}if(r){const e=document.querySelector("#btn-save");r.addEventListener("blur",(function(){e.disabled=!u(r)}))}if(o){const e=document.querySelector("#btn-save");o.addEventListener("blur",(function(){e.disabled=!u(o)}))}},s=(e,t)=>e===t,u=e=>/^[\s0-9a-zA-Zа-яёА-ЯЁ]{3,}$/.test(e.value)}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var u=t[r]={exports:{}};return e[r](u,u.exports,a),u.exports}a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=a(411),t=a(363),r=a(29);e.hide(),t.init(),r.run()})()})();